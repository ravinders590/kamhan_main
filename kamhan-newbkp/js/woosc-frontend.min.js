"use strict";!function(o){var t=0;function s(){o(".woosc-search-result").html("").addClass("woosc-loading"),t=null;var s={action:"woosc_search",keyword:o("#woosc_search_input").val()};o.post(woosc_vars.ajax_url,s,(function(t){o(".woosc-search-result").html(t).removeClass("woosc-loading")}))}function e(o,t,s){var e,a=new Date;a.setTime(a.getTime()+24*s*60*60*1e3),e="expires="+a.toUTCString(),document.cookie=o+"="+t+"; "+e+"; path=/"}function a(o){for(var t,s=o+"=",e=document.cookie.split(";"),a=0;a<e.length;a++){for(t=e[a];" "==t.charAt(0);)t=t.substring(1);if(0==t.indexOf(s))return decodeURIComponent(t.substring(s.length,t.length))}return""}function c(){var o=D();return""!=a(o)?a(o):""}function n(){var t=D(),s=[];o(".woosc-bar-item").each((function(){var t=o(this).attr("data-id");""!==t&&s.push(t)})),e(t,s.join(),7),w("table")}function r(){var t=[],s=[],a="woosc_fields",c="woosc_settings";""!==woosc_vars.user_id&&(a="woosc_fields_"+woosc_vars.user_id,c="woosc_settings_"+woosc_vars.user_id),o(".woosc-settings-field").each((function(){var s=o(this).val();o(this).prop("checked")?(t.push(s),o(".woosc_table .tr-"+s).removeClass("tr-hide")):o(".woosc_table .tr-"+s).addClass("tr-hide")})),o(".woosc-settings-tool").each((function(){var t=o(this).val();o(this).prop("checked")&&s.push(t)})),e(a,t.join(","),7),e(c,s.join(","),7),w("table")}function i(t){var s,c,n=!1,r=woosc_vars.limit_notice,i=D();""!==a(i)?((c=a(i).split(",")).length<woosc_vars.limit?(c=o.grep(c,(function(o){return o!=t})),"append"===woosc_vars.adding?c.push(t):c.unshift(t),e(i,c.join(),7)):(n=!0,r=r.replace("{limit}",woosc_vars.limit)),s=c.length):(e(i,t,7),s=1),C(s),o(document.body).trigger("woosc_added",[s]),n?(o('.woosc-btn[data-id="'+t+'"]').removeClass("woosc-btn-adding woosc-adding"),alert(r)):(o('.woosc-btn[data-id="'+t+'"]').removeClass("woosc-btn-adding woosc-adding").addClass("woosc-btn-added woosc-added"),o('.woosc-btn[data-id="'+t+'"]:not(.woosc-btn-has-icon)').html(woosc_vars.button_text_added),o('.woosc-btn-has-icon[data-id="'+t+'"]').find(".woosc-btn-icon").removeClass(woosc_vars.button_normal_icon).addClass(woosc_vars.button_added_icon),o('.woosc-btn-has-icon[data-id="'+t+'"]').find(".woosc-btn-text").html(woosc_vars.button_text_added))}function d(t){var s,c=0,n=D();"all"!==t?(""!=a(n)&&(s=a(n).split(","),e(n,(s=o.grep(s,(function(o){return o!=t}))).join(),7),c=s.length),o('.woosc-btn[data-id="'+t+'"]').removeClass("woosc-btn-added woosc-added"),o('.woosc-btn[data-id="'+t+'"]:not(.woosc-btn-has-icon)').html(woosc_vars.button_text),o('.woosc-btn-has-icon[data-id="'+t+'"]').find(".woosc-btn-icon").removeClass(woosc_vars.button_added_icon).addClass(woosc_vars.button_normal_icon),o('.woosc-btn-has-icon[data-id="'+t+'"]').find(".woosc-btn-text").html(woosc_vars.button_text)):(""!=a(n)&&(e(n,"",7),c=0),o(".woosc-btn").removeClass("woosc-btn-added woosc-added"),o(".woosc-btn:not(.woosc-btn-has-icon)").html(woosc_vars.button_text),o(".woosc-btn-has-icon").find(".woosc-btn-icon").removeClass(woosc_vars.button_added_icon).addClass(woosc_vars.button_normal_icon),o(".woosc-btn-has-icon").find(".woosc-btn-text").html(woosc_vars.button_text)),C(c),o(document.body).trigger("woosc_removed",[c])}function l(){var t,s=D();""!=a(s)&&(t=a(s).split(","),o(".woosc-btn").removeClass("woosc-btn-added woosc-added"),o(".woosc-btn:not(.woosc-btn-has-icon)").html(woosc_vars.button_text),o(".woosc-btn.woosc-btn-has-icon").find(".woosc-btn-icon").removeClass(woosc_vars.button_added_icon).addClass(woosc_vars.button_normal_icon),o(".woosc-btn.woosc-btn-has-icon").find(".woosc-btn-text").html(woosc_vars.button_text),t.forEach((function(t){o(".woosc-btn-"+t).addClass("woosc-btn-added woosc-added"),o(".woosc-btn-"+t+":not(.woosc-btn-has-icon)").html(woosc_vars.button_text_added),o(".woosc-btn-has-icon.woosc-btn-"+t).find(".woosc-btn-icon").removeClass(woosc_vars.button_normal_icon).addClass(woosc_vars.button_added_icon),o(".woosc-btn-has-icon.woosc-btn-"+t).find(".woosc-btn-text").html(woosc_vars.button_text_added)})))}function w(t){var s={action:"woosc_load_data",get_data:t};"table"===t&&o(".woosc-table-inner").addClass("woosc-loading"),"sidebar"===t&&o(".woosc-sidebar").addClass("woosc-loading"),o.post(woosc_vars.ajax_url,s,(function(s){("bar"===t||"table"===t)&&o(".woosc-bar-items").html(s.bar).addClass("woosc-bar-items-loaded"),"table"===t&&(o(".woosc-table-items").html(s.table).addClass("woosc-table-items-loaded"),o(window).width()>=768?"yes"===woosc_vars.freeze_column&&"yes"===woosc_vars.freeze_row?o("#woosc_table").tableHeadFixer({head:!0,left:1}):"yes"===woosc_vars.freeze_column?o("#woosc_table").tableHeadFixer({head:!1,left:1}):"yes"===woosc_vars.freeze_row&&o("#woosc_table").tableHeadFixer({head:!0}):"yes"===woosc_vars.freeze_row&&o("#woosc_table").tableHeadFixer({head:!0}),"yes"===woosc_vars.scrollbar&&o(".woosc-table-items").perfectScrollbar({theme:"wpc"}),o(".woosc-table-inner").removeClass("woosc-loading"),y(),x(),k()),"sidebar"===t&&(o(".woosc-sidebar-items").html(s.sidebar).addClass("woosc-sidebar-items-loaded"),o(".woosc-sidebar").removeClass("woosc-loading"),"yes"===woosc_vars.scrollbar&&o(".woosc-sidebar-items").perfectScrollbar({theme:"wpc"}))}))}function b(){let t=o(window).width();t>=1024&&o(".woosc-quick-table .woosc_table").tableHeadFixer({head:!1,left:2}),t>=768&&t<1024&&o(".woosc-quick-table .woosc_table").tableHeadFixer({head:!1,left:1}),t<768&&o(".woosc-quick-table .woosc_table").tableHeadFixer({head:!1,left:0})}function u(){h(),o("#woosc-area").addClass("woosc-area-open-bar"),o(".woosc-bar").addClass("woosc-bar-open"),o(".woosc-bar-items").sortable({handle:"img",update:function(o,t){n()}}),o(document.body).trigger("woosc_bar_open")}function _(){o("#woosc-area").removeClass("woosc-area-open-bar"),o(".woosc-bar").removeClass("woosc-bar-open"),o(document.body).trigger("woosc_bar_close")}function m(){_(),p(),o("#woosc-area").addClass("woosc-area-open-sidebar"),o(".woosc-sidebar").addClass("woosc-sidebar-open"),o(document.body).trigger("woosc_sidebar_open")}function h(){o("#woosc-area").removeClass("woosc-area-open-sidebar"),o(".woosc-sidebar").removeClass("woosc-sidebar-open"),o(document.body).trigger("woosc_sidebar_close")}function v(){h(),o("#woosc-area").addClass("woosc-area-open-table"),o(".woosc-table").addClass("woosc-table-open"),o(".woosc-bar-btn").addClass("woosc-bar-btn-open"),"yes"===woosc_vars.bar_bubble&&o(".woosc-bar").removeClass("woosc-bar-bubble"),o(document.body).trigger("woosc_table_open")}function p(){o("#woosc-area").removeClass("woosc-area-open woosc-area-open-table"),o(".woosc-table").removeClass("woosc-table-open"),o(".woosc-bar-btn").removeClass("woosc-bar-btn-open"),"yes"===woosc_vars.bar_bubble&&o(".woosc-bar").addClass("woosc-bar-bubble"),o(document.body).trigger("woosc_table_close")}function g(){o("#woosc-area").removeClass("woosc-area-open"),_(),p(),o(document.body).trigger("woosc_close")}function f(){o("#woosc-area").hasClass("woosc-area-open")?g():(o("#woosc-area").addClass("woosc-area-open"),w("table"),u(),v(),o(document.body).trigger("woosc_open")),o(document.body).trigger("woosc_toggle")}function C(t){var s,e;"first"===t&&(""!=(s=c())?(e=s.split(","),t=e.length):t=0),o(".woosc-menu-item").each((function(){o(this).hasClass("menu-item-type-woosc")?o(this).find(".woosc-menu-item-inner").attr("data-count",t):o(this).addClass("menu-item-type-woosc").find("a").wrapInner('<span class="woosc-menu-item-inner" data-count="'+t+'"></span>')})),o("#woosc-area").attr("data-count",t),o(".woosc-bar").attr("data-count",t),o(".woosc-sidebar-count").html(" ("+t+")"),o(".woosc-bar-items").removeClass("woosc-bar-items-loaded"),o(".woosc-sidebar-items").removeClass("woosc-sidebar-items-loaded"),o(".woosc-table-items").removeClass("woosc-table-items-loaded"),o(document.body).trigger("woosc_change_count",[t])}function y(){o(".woosc_table > tbody > tr").each((function(){var t=o(this),s=0,e=!0;t.children("td").each((function(){if(s>0&&o(this).html().length>0)return e=!1,!1;s++})),e&&t.addClass("tr-empty").remove()}))}function k(){o("#woosc_highlight_differences").prop("checked")?o(".woosc_table > tbody > tr").each((function(){var t=o(this),s=0,e=o(this).children("td").eq(1).html(),a=!1;t.children("td:not(.td-placeholder)").each((function(){if(s>1&&o(this).html()!==e)return a=!0,!1;s++})),a&&t.addClass("tr-highlight")})):o(".woosc_table tr").removeClass("tr-highlight")}function x(){o("#woosc_hide_similarities").prop("checked")?o(".woosc_table > tbody > tr").each((function(){var t=o(this),s=0,e=o(this).children("td").eq(1).html(),a=!0;t.children("td:not(.td-placeholder)").each((function(){if(s>1&&o(this).html()!==e)return a=!1,!1;s++})),a&&t.addClass("tr-similar")})):o(".woosc_table tr").removeClass("tr-similar")}function D(){return""!==woosc_vars.user_id?"woosc_products_"+woosc_vars.user_id:"woosc_products"}o((function(){(function(){var t=o("#woosc-area").attr("data-bg-color"),s=o("#woosc-area").attr("data-btn-color");o(".woosc-table").css("background-color",t),o(".woosc-bar").css("background-color",t),o(".woosc-bar-btn").css("background-color",s),o(".woosc-sidebar-btn").css("background-color",s)})(),C("first"),l(),y(),x(),k(),"yes"===woosc_vars.open_bar&&(w("bar"),u()),o(".woosc-settings-fields").sortable({handle:".label",update:function(o,t){r()}}),"show_message"===woosc_vars.button_action&&o.notiny.addTheme("woosc",{notification_class:"notiny-theme-woosc"}),b()})),o(window).on("resize",(function(){b()})),o(document).on("click touch",".woosc_table .woosq-btn, .woosc_table .woosq-link",(function(o){o.preventDefault(),g()})),o(document).on("click touch",".woosc-sidebar .woosq-btn, .woosc-sidebar .woosq-link",(function(o){o.preventDefault(),h()})),o(document).on("click touch",".woosc-table-settings",(function(t){t.preventDefault(),o(".woosc-settings").toggleClass("open")})),o(document).on("click touch",".woosc-bar-print",(function(t){t.preventDefault(),o.print("#woosc-area")})),o(document).on("keydown",(function(t){(1==t.ctrlKey||1==t.metaKey)&&"80"==t.which&&o(".woosc-area").hasClass("woosc-area-open-table")&&(t.preventDefault(),o.print("#woosc-area"))})),o(document).on("click touch",".woosc-bar-share",(function(t){t.preventDefault(),o(".woosc-share").toggleClass("open"),o(".woosc-share-content").addClass("woosc-loading");jQuery.post(woosc_vars.ajax_url,{action:"woosc_share"},(function(t){o(".woosc-share-content").html(t).removeClass("woosc-loading")}))})),o(document).on("click touch","#woosc_copy_url, #woosc_copy_btn",(function(o){o.preventDefault(),function(o){var t,s,e,a;o="string"==typeof o?document.querySelector(o):o,navigator.userAgent.match(/ipad|ipod|iphone/i)?(t=o.contentEditable,s=o.readOnly,o.contentEditable=!0,o.readOnly=!0,e=document.createRange(),e.selectNodeContents(o),a=window.getSelection(),a.removeAllRanges(),a.addRange(e),o.setSelectionRange(0,999999),o.contentEditable=t,o.readOnly=s):o.select(),document.execCommand("copy"),alert(woosc_vars.copied_text.replace("%s",o.value))}("#woosc_copy_url")})),o(document).on("click touch",".woosc-bar-search",(function(e){if(e.preventDefault(),o(".woosc-search").toggleClass("open"),""===o(".woosc-search-result").text())return null!=t&&clearTimeout(t),t=setTimeout(s,300),!1})),o(document).on("click touch",".woosc-popup",(function(t){0===o(t.target).closest(".woosc-popup-content").length&&o(this).toggleClass("open")})),o(document).on("keyup","#woosc_search_input",(function(){if(""!==o("#woosc_search_input").val())return null!=t&&clearTimeout(t),t=setTimeout(s,300),!1})),o(document).on("click touch",".woosc-item-add",(function(t){t.preventDefault();var s=o(this).attr("data-id");o(".woosc-search").toggleClass("open"),i(s),w("table"),v()})),o(document).on("click touch",".woosc-popup-close",(function(t){t.preventDefault(),o(this).closest(".woosc-popup").toggleClass("open")})),o(document).on("woovr_selected",(function(t,s){var e=s.attr("data-id"),a=s.attr("data-pid");e>0?o(".woosc-btn-"+a).removeClass("woosc-btn-added woosc-added").attr("data-id",e):o(".woosc-btn-"+a).removeClass("woosc-btn-added woosc-added").attr("data-id",a)})),o(document).on("found_variation",(function(t,s){var e=o(t.target).attr("data-product_id");o(".woosc-btn-"+e).removeClass("woosc-btn-added woosc-added").attr("data-id",s.variation_id),o(".woosc-btn-"+e+":not(.woosc-btn-has-icon)").html(woosc_vars.button_text),o(".woosc-btn-has-icon.woosc-btn-"+e).find(".woosc-btn-icon").removeClass(woosc_vars.button_added_icon).addClass(woosc_vars.button_normal_icon),o(".woosc-btn-has-icon.woosc-btn-"+e).find(".woosc-btn-text").html(woosc_vars.button_text)})),o(document).on("reset_data",(function(t){var s=o(t.target).attr("data-product_id");o(".woosc-btn-"+s).removeClass("woosc-btn-added woosc-added").attr("data-id",s),o(".woosc-btn-"+s+":not(.woosc-btn-has-icon)").html(woosc_vars.button_text),o(".woosc-btn-has-icon.woosc-btn-"+s).find(".woosc-btn-icon").removeClass(woosc_vars.button_added_icon).addClass(woosc_vars.button_normal_icon),o(".woosc-btn-has-icon.woosc-btn-"+s).find(".woosc-btn-text").html(woosc_vars.button_text)})),o(document).on("click touch",".woosc-bar-remove",(function(o){o.preventDefault(),1==confirm(woosc_vars.remove_all)&&(d("all"),w("table"))})),o(document).on("click touch",".woosc-btn",(function(t){var s,e,a,c,n,r;t.preventDefault(),e=(s=o(this)).attr("data-id"),a=s.attr("data-pid"),c=s.attr("data-product_id"),n=s.attr("data-product_name"),r=s.attr("data-product_image"),void 0!==a&&!1!==a&&(e=a),void 0!==c&&!1!==c&&(e=c),s.addClass(""),s.hasClass("woosc-btn-added woosc-added")?"yes"===woosc_vars.click_again?(d(e),"show_message"===woosc_vars.button_action&&o.notiny({theme:"woosc",position:woosc_vars.message_position,image:r,text:woosc_vars.message_removed.replace("{name}","<strong>"+n+"</strong>")})):"show_message"===woosc_vars.button_action&&o.notiny({theme:"woosc",position:woosc_vars.message_position,image:r,text:woosc_vars.message_exists.replace("{name}","<strong>"+n+"</strong>")}):(s.addClass("woosc-btn-adding woosc-adding"),i(e),"show_message"===woosc_vars.button_action&&o.notiny({theme:"woosc",position:woosc_vars.message_position,image:r,text:woosc_vars.message_added.replace("{name}","<strong>"+n+"</strong>")})),"show_bar"===woosc_vars.button_action&&(w("bar"),u()),"show_table"===woosc_vars.button_action&&(w("table"),u(),v()),("show_message"===woosc_vars.button_action||"none"===woosc_vars.button_action)&&o(".woosc-bar").hasClass("woosc-bar-open")&&w("bar"),"show_sidebar"===woosc_vars.button_action&&(w("sidebar"),m())})),o(document).on("click touch","#woosc-area .woosc-bar-item-remove, #woosc-area .woosc-remove",(function(t){t.preventDefault();var s=o(this).attr("data-id");o(this).parent().addClass("removing"),d(s),w("table"),l()})),o(document).on("click touch",".woosc-page .woosc-remove",(function(t){t.preventDefault(),d(o(this).attr("data-id")),location.reload()})),o(document).on("click touch",".woosc-sidebar-item-remove",(function(t){t.preventDefault(),d(o(this).closest(".woosc-sidebar-item").attr("data-id")),o(this).closest(".woosc-sidebar-item").slideUp(),l()})),o(document).on("click touch",".woosc-bar-btn",(function(t){t.preventDefault(),o(".woosc-table-items").hasClass("woosc-table-items-loaded")||w("table"),o(".woosc-table").hasClass("woosc-table-open")?p():v()})),o(document).on("click touch",(function(t){("yes"===woosc_vars.click_outside||"yes_empty"===woosc_vars.click_outside&&0===parseInt(o(".woosc-bar").attr("data-count")))&&0===o(t.target).closest(".wpc_compare_count").length&&0===o(t.target).closest(".woosc-popup").length&&0===o(t.target).closest(".woosc-btn").length&&0===o(t.target).closest(".woosc-table").length&&0===o(t.target).closest(".woosc-bar").length&&0===o(t.target).closest(".woosc-menu-item a").length&&0===o(t.target).closest(".woosc-menu a").length&&0===o(t.target).closest(".woosc-sidebar-btn").length&&(""===woosc_vars.open_button||0===o(t.target).closest(woosc_vars.open_button).length)&&g()})),o(document).on("click touch",".woosc-area-open-sidebar",(function(t){0===o(t.target).closest(".woosc-sidebar").length&&h()})),o(document).on("click touch",".woosc-sidebar-close, .woosc-sidebar-continue",(function(o){h()})),o(document).on("click touch",".woosc-sidebar-btn",(function(o){o.preventDefault(),h(),f()})),o(document).on("click touch","#woosc-table-close",(function(o){o.preventDefault(),p()})),o(document).on("change",".woosc-settings-field, .woosc-settings-tool",(function(){r()})),""!==woosc_vars.open_button&&o(document).on("click touch",woosc_vars.open_button,(function(t){t.preventDefault(),"open_page"===woosc_vars.open_button_action?""!==woosc_vars.page_url&&"#"!==woosc_vars.page_url&&(window.location.href=woosc_vars.page_url):("open_popup"===woosc_vars.open_button_action&&(o(".woosc-table-items").hasClass("woosc-table-items-loaded")||w("table"),u(),v()),"open_sidebar"===woosc_vars.open_button_action&&(o(".woosc-sidebar-items").hasClass("woosc-sidebar-items-loaded")||w("sidebar"),m()))})),o(document).on("click touch",".woosc-menu-item a, .woosc-menu a",(function(t){"open_popup"===woosc_vars.menu_action&&(t.preventDefault(),o(".woosc-table-items").hasClass("woosc-table-items-loaded")||w("table"),u(),v()),"open_sidebar"===woosc_vars.menu_action&&(t.preventDefault(),o(".woosc-sidebar-items").hasClass("woosc-sidebar-items-loaded")||w("sidebar"),m())}))}(jQuery);