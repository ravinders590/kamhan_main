"use strict";var woosq_ids=[],woosq_products=[];function woosq_open(o,s,t){var e,a,r;jQuery("body").addClass("woosq-open"),"sidebar"===woosq_vars.view?(woosq_loading(),e={action:"woosq_quickview",product_id:o},jQuery.post(woosq_vars.ajax_url,e,(function(s){jQuery(".woosq-sidebar").html(s),woosq_loaded(),jQuery(document.body).trigger("woosq_loaded",[o])}))):(-1===jQuery.inArray(o,woosq_ids)&&(woosq_ids.push(o),woosq_products.push({src:woosq_vars.ajax_url+"?product_id="+o})),a=woosq_get_key(woosq_products,"src",woosq_vars.ajax_url+"?product_id="+o),r="mfp-woosq",void 0!==t&&!1!==t&&(r=r+" mfp-woosq-"+t),r=void 0!==s&&!1!==s?r+" "+s:r+" "+woosq_vars.effect,jQuery.magnificPopup.open({items:woosq_products,type:"ajax",mainClass:r,removalDelay:160,overflowY:"scroll",fixedContentPos:!0,tClose:woosq_vars.close,gallery:{tPrev:woosq_vars.prev,tNext:woosq_vars.next,enabled:!0},ajax:{settings:{type:"GET",data:{action:"woosq_quickview"}}},callbacks:{open:function(){"yes"===woosq_vars.hashchange&&(location.href=location.href.split("#")[0]+"#woosq")},ajaxContentAdded:function(){jQuery(document.body).trigger("woosq_loaded",[o])},close:function(){"yes"===woosq_vars.hashchange&&location.hash&&history.go(-1)},afterClose:function(){jQuery(document.body).trigger("woosq_close",[o])}}},a)),jQuery(document.body).trigger("woosq_open",[o])}function woosq_close(){jQuery("body").removeClass("woosq-open"),jQuery(document.body).trigger("woosq_close")}function woosq_loading(){jQuery(".woosq-sidebar").addClass("woosq-loading")}function woosq_loaded(){jQuery(".woosq-sidebar").removeClass("woosq-loading")}function woosq_init_content(o){"loaded"===o&&(woosq_thumbnails_zoom(),woosq_thumbnails_slick(),woosq_related_slick()),"sidebar"===woosq_vars.view?"yes"===woosq_vars.scrollbar&&jQuery(".woosq-product").perfectScrollbar("destroy").perfectScrollbar({theme:"wpc"}):"yes"===woosq_vars.scrollbar&&(jQuery(window).width()<1024?(jQuery(".woosq-product .summary-content").perfectScrollbar("destroy"),jQuery(".woosq-product").perfectScrollbar("destroy").perfectScrollbar({theme:"wpc"})):(jQuery(".woosq-product").perfectScrollbar("destroy"),jQuery(".woosq-product .summary-content").perfectScrollbar("destroy").perfectScrollbar({theme:"wpc"})))}function woosq_get_key(o,s,t){for(var e=0;e<o.length;e++)if(o[e][s]===t)return e;return-1}function woosq_thumbnails_zoom(){"zoom"===woosq_vars.thumbnails_effect&&jQuery("#woosq-popup .thumbnails .images .thumbnail").each((function(){var o=jQuery(this),s=JSON.parse(woosq_vars.thumbnails_zoom_params);s.url=o.find("img").attr("data-src"),o.trigger("zoom.destroy"),o.zoom(s)}))}function woosq_thumbnails_slick(){jQuery("#woosq-popup .thumbnails .images .thumbnail").length>1&&(jQuery("#woosq-popup .thumbnails .images").hasClass("slick-initialized")&&jQuery("#woosq-popup .thumbnails .images").slick("unslick"),jQuery("#woosq-popup .thumbnails .images").slick(JSON.parse(woosq_vars.thumbnails_slick_params)))}function woosq_related_slick(){jQuery(".woosq-related-products").hasClass("slick-initialized")&&jQuery(".woosq-related-products").slick("unslick"),jQuery(".woosq-related-product").length>1&&jQuery(".woosq-related-products").slick(JSON.parse(woosq_vars.related_slick_params))}!function(o){o((function(){o(".woosq-btn, .woosq-link").each((function(){var s=o(this).attr("data-id"),t=o(this).attr("data-pid"),e=o(this).attr("data-product_id");void 0!==t&&!1!==t&&(s=t),void 0!==e&&!1!==e&&(s=e),-1===o.inArray(s,woosq_ids)&&(woosq_ids.push(s),woosq_products.push({src:woosq_vars.ajax_url+"?product_id="+s}))}))})),o(document).on("click touch",'[href*="#woosq-"]',(function(s){var t=o(this),e=t.attr("href"),a=/#woosq-([0-9]+)/g.exec(e);void 0!==a[1]&&(woosq_open(a[1],t.attr("data-effect"),t.attr("data-context")),s.preventDefault())})),o(document).on("click touch",".woosq-btn, .woosq-link",(function(s){var t,e,a,r;s.preventDefault(),e=(t=o(this)).attr("data-id"),void 0!==(a=t.attr("data-pid"))&&!1!==a&&(e=a),void 0!==(r=t.attr("data-product_id"))&&!1!==r&&(e=r),woosq_open(e,t.attr("data-effect"),t.attr("data-context"))})),o(document).on("added_to_cart",(function(){"yes"===woosq_vars.auto_close&&("popup"===woosq_vars.view&&o.magnificPopup.close(),woosq_close())})),o(document).on("woosq_loaded",(function(){o("#woosq-popup").find(".variations_form").each((function(){o(this).wc_variation_form()})),woosq_init_content("loaded"),o("#woosq-popup .woosq-redirect").length||("yes"===woosq_vars.cart_redirect&&""!==woosq_vars.cart_url?o("#woosq-popup form").prepend('<input class="woosq-redirect" name="woosq-redirect" type="hidden" value="'+woosq_vars.cart_url+'"/>'):o("#woosq-popup form").prepend('<input class="woosq-redirect" name="woosq-redirect" type="hidden" value="'+window.location.href+'"/>'))})),o(window).on("resize",(function(){woosq_init_content("resize")})),o(document).on("found_variation",(function(s,t){var e,a,r;!o(s.target).closest(".woosb-product").length&&!o(s.target).closest(".woosg-product").length&&!o(s.target).closest(".woobt-product").length&&!o(s.target).closest(".woofs-product").length&&o(s.target).closest("#woosq-popup").length&&void 0!==t.image_id&&o("#woosq-popup .thumbnails .thumbnail").length>1&&((e=o('.thumbnail:not(.slick-cloned)[data-id="'+t.image_id+'"]')).length&&(a=o("#woosq-popup .thumbnails .thumbnail").index(e),r=o("#woosq-popup .thumbnails .images"),a>0&&r.hasClass("slick-initialized")&&setTimeout((function(){r.slick("slickGoTo",a-1)}),100)))})),o(document).on("reset_data",(function(s){o(s.target).closest("#woosq-popup").length&&o("#woosq-popup .thumbnails .thumbnail").length>1&&o("#woosq-popup .thumbnails .images").hasClass("slick-initialized")&&o("#woosq-popup .thumbnails .images").slick("slickGoTo",0)})),"yes"===woosq_vars.hashchange&&o(window).on("hashchange",(function(){location.href.indexOf("#woosq")<0&&("popup"===woosq_vars.view&&o.magnificPopup.close(),woosq_close())})),o(document).on("click touch",".woosq-overlay, .woosq-close",(function(){woosq_close()}))}(jQuery);