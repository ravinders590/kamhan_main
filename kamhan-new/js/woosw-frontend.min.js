"use strict";!function(o){var t=!0,s=[],n=Cookies.get("woosw_key");try{t="sessionStorage"in window&&null!==window.sessionStorage,window.sessionStorage.setItem("woosw","test"),window.sessionStorage.removeItem("woosw")}catch(o){t=!1}function w(){o.post(woosw_vars.ajax_url,{action:"wishlist_load"},(function(t){null!=t.content&&o("#woosw_wishlist").html(t.content),null!=t.count&&(o("#woosw_wishlist .woosw-items .woosw-item").length&&o("#woosw_wishlist .woosw-items .woosw-item").length!=t.count?l(o("#woosw_wishlist .woosw-items .woosw-item").length):l(t.count)),null!=t.notice&&u(t.notice),o("#woosw_wishlist").addClass("woosw-loaded"),_(),a()}))}function e(){o.post(woosw_vars.ajax_url,{action:"wishlist_load_count"},(function(t){if(null!=t.count){var s=t.count;l(s),o(document.body).trigger("woosw_load_count",[s])}}))}function a(){o("#woosw_wishlist").addClass("woosw-show"),h(),o(document.body).trigger("woosw_wishlist_show")}function i(){o("#woosw_wishlist").removeClass("woosw-show"),o(document.body).trigger("woosw_wishlist_hide")}function d(){o("#woosw_manage").removeClass("woosw-show"),o(document.body).trigger("woosw_manage_hide")}function c(){o(".woosw-popup").addClass("woosw-loading")}function r(){o(".woosw-popup").removeClass("woosw-loading")}function l(t){o("#woosw_wishlist .woosw-count").html(t),parseInt(t)>0?o(".woosw-empty").show():o(".woosw-empty").hide(),o(".woosw-menu-item .woosw-menu-item-inner").length?o(".woosw-menu-item .woosw-menu-item-inner").attr("data-count",t):o(".woosw-menu-item a").html('<span class="woosw-menu-item-inner" data-count="'+t+'"><i class="woosw-icon"></i><span>'+woosw_vars.menu_text+"</span></span>"),o(document.body).trigger("woosw_change_count",[t])}function u(t){o(".woosw-notice").html(t),o("#woosw_wishlist .woosw-notice").addClass("woosw-notice-show"),setTimeout((function(){o("#woosw_wishlist .woosw-notice").removeClass("woosw-notice-show")}),3e3)}function _(){"yes"===woosw_vars.perfect_scrollbar&&jQuery("#woosw_wishlist .woosw-popup-content-mid").perfectScrollbar({theme:"wpc"})}function m(o){return String(o).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function h(){jQuery(".woosw-popup-center .woosw-popup-content").height(2*Math.floor(jQuery(".woosw-popup-center .woosw-popup-content").height()/2)+2)}function p(){o.post(woosw_vars.ajax_url,{action:"woosw_get_data"},(function(s){s&&(t&&sessionStorage.setItem("woosw_data_"+s.key,JSON.stringify(s)),s.fragments&&f(s.fragments),s.ids&&(g(s.ids),v(s.ids)),s.key&&(null==n||""===n||n!==s.key)&&Cookies.set("woosw_key",s.key,{expires:7}),o(document.body).trigger("woosw_data_refreshed",[s]))}))}function f(t){o.each(t,(function(t,s){o(t).replaceWith(s)})),o(document.body).trigger("woosw_fragments_refreshed",[t])}function v(o){s=o}function g(t){o(".woosw-btn").removeClass("woosw-btn-added woosw-added"),o(".woosw-btn:not(.woosw-btn-has-icon)").html(woosw_vars.button_text),o(".woosw-btn.woosw-btn-has-icon").find(".woosw-btn-icon").removeClass(woosw_vars.button_added_icon).addClass(woosw_vars.button_normal_icon),o(".woosw-btn.woosw-btn-has-icon").find(".woosw-btn-text").html(woosw_vars.button_text),o.each(t,(function(t,s){o(".woosw-btn-"+t).addClass("woosw-btn-added woosw-added"),o(".woosw-btn-"+t+":not(.woosw-btn-has-icon)").html(woosw_vars.button_text_added),o(".woosw-btn-has-icon.woosw-btn-"+t).find(".woosw-btn-icon").removeClass(woosw_vars.button_normal_icon).addClass(woosw_vars.button_added_icon),o(".woosw-btn-has-icon.woosw-btn-"+t).find(".woosw-btn-text").html(woosw_vars.button_text_added),void 0!==s.parent&&(o(".woosw-btn-"+s.parent).addClass("woosw-btn-added woosw-added"),o(".woosw-btn-"+s.parent+":not(.woosw-btn-has-icon)").html(woosw_vars.button_text_added),o(".woosw-btn-has-icon.woosw-btn-"+s.parent).find(".woosw-btn-icon").removeClass(woosw_vars.button_normal_icon).addClass(woosw_vars.button_added_icon),o(".woosw-btn-has-icon.woosw-btn-"+s.parent).find(".woosw-btn-text").html(woosw_vars.button_text_added))})),o(document.body).trigger("woosw_buttons_refreshed",[t])}function b(t){o('.woosw-btn[data-id="'+t+'"]').removeClass("woosw-btn-added woosw-added"),o('.woosw-btn[data-id="'+t+'"]:not(.woosw-btn-has-icon)').html(woosw_vars.button_text),o('.woosw-btn-has-icon.woosw-btn[data-id="'+t+'"]').find(".woosw-btn-icon").removeClass(woosw_vars.button_added_icon).addClass(woosw_vars.button_normal_icon),o('.woosw-btn-has-icon.woosw-btn[data-id="'+t+'"]').find(".woosw-btn-text").html(woosw_vars.button_text),o.each(s,(function(s){parseInt(s)===parseInt(t)&&(o('.woosw-btn[data-id="'+t+'"]').addClass("woosw-btn-added woosw-added"),o('.woosw-btn[data-id="'+t+'"]:not(.woosw-btn-has-icon)').html(woosw_vars.button_text_added),o('.woosw-btn-has-icon.woosw-btn[data-id="'+t+'"]').find(".woosw-btn-icon").removeClass(woosw_vars.button_normal_icon).addClass(woosw_vars.button_added_icon),o('.woosw-btn-has-icon.woosw-btn[data-id="'+t+'"]').find(".woosw-btn-text").html(woosw_vars.button_text_added))})),o(document.body).trigger("woosw_refresh_button_id",[t,s])}o((function(){(null==n||""===n)&&(n=function(){for(var o=[],t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",s=t.length,n=0;n<6;n++)o.push(t.charAt(Math.floor(Math.random()*s)));return o.join("")}(),Cookies.set("woosw_key",n,{expires:7})),function(){if(t)try{var o=JSON.parse(sessionStorage.getItem("woosw_data_"+n));o.fragments&&f(o.fragments),o.ids&&(g(o.ids),v(o.ids)),o.key&&(null==n||""===n)&&Cookies.set("woosw_key",o.key,{expires:7})}catch(o){p()}else p()}(),o(".woosw-custom-menu-item").length&&e(),"message"===woosw_vars.button_action&&o.notiny.addTheme("woosw",{notification_class:"notiny-theme-woosw"})})),o(document).on("woosw_refresh_count",(function(){e()})),o(document).on("woovr_selected",(function(t,s,n){var w=s.attr("data-id"),e=s.attr("data-pid");w>0?(o(".woosw-btn-"+e).attr("data-id",w).removeClass("woosw-btn-added woosw-added"),b(w)):(o(".woosw-btn-"+e).attr("data-id",e).removeClass("woosw-btn-added woosw-added"),b(e))})),o(document).on("found_variation",(function(t,s){var n=o(t.target).attr("data-product_id");o(".woosw-btn-"+n).attr("data-id",s.variation_id).removeClass("woosw-btn-added woosw-added"),b(s.variation_id)})),o(document).on("reset_data",(function(t){var s=o(t.target).attr("data-product_id");o(".woosw-btn-"+s).attr("data-id",s).removeClass("woosw-btn-added woosw-added"),b(s)})),o(document).on("click touch","#woosw_wishlist .woosq-link, #woosw_wishlist .woosq-btn",(function(o){i(),o.preventDefault()})),o(document).on("click touch",".woosw-btn",(function(s){var n,e=o(this),i=e.attr("data-id"),d=e.attr("data-pid"),c=e.attr("data-product_id"),r=e.attr("data-product_name"),m=e.attr("data-product_image");void 0!==d&&!1!==d&&(i=d),void 0!==c&&!1!==c&&(i=c),n={action:"wishlist_add",product_id:i},e.hasClass("woosw-added")?"page"===woosw_vars.button_action_added?window.location.href=woosw_vars.wishlist_url:o("#woosw_wishlist").hasClass("woosw-loaded")?a():w():(e.addClass("woosw-adding").find(".woosw-btn-icon").removeClass(woosw_vars.button_normal_icon+" "+woosw_vars.button_added_icon).addClass(woosw_vars.button_loading_icon),o.post(woosw_vars.ajax_url,n,(function(s){e.removeClass("woosw-adding").find(".woosw-btn-icon").removeClass(woosw_vars.button_loading_icon),"list"===woosw_vars.button_action&&(null!=s.content&&o("#woosw_wishlist").html(s.content).addClass("woosw-loaded"),null!=s.notice&&u(s.notice.replace("{name}","<strong>"+r+"</strong>")),_(),a()),"message"===woosw_vars.button_action&&(o("#woosw_wishlist").removeClass("woosw-loaded"),o.notiny({theme:"woosw",position:woosw_vars.message_position,image:m,text:s.notice.replace("{name}","<strong>"+r+"</strong>")})),"no"===woosw_vars.button_action&&o("#woosw_wishlist").removeClass("woosw-loaded"),null!=s.count&&l(s.count),1===s.status&&b(i),t&&s.data&&sessionStorage.setItem("woosw_data_"+s.data.key,JSON.stringify(s.data)),s.data.fragments&&f(s.data.fragments),s.data.ids&&(g(s.data.ids),v(s.data.ids)),o(document.body).trigger("woosw_add",[i])}))),s.preventDefault()})),o(document).on("click touch",".woosw-item--remove span",(function(s){var n=o(this),w=n.closest(".woosw-popup-inner").data("key"),e=n.closest(".woosw-item"),a=e.attr("data-id"),i={action:"wishlist_remove",product_id:a,key:w};n.addClass("woosw-removing"),o.post(woosw_vars.ajax_url,i,(function(s){n.removeClass("woosw-removing"),e.remove(),null!=s.content&&o("#woosw_wishlist").html(s.content).addClass("woosw-loaded"),null!=s.notice&&u(s.notice),null!=s.count&&l(s.count),t&&s.data&&sessionStorage.setItem("woosw_data_"+s.data.key,JSON.stringify(s.data)),s.data.fragments&&f(s.data.fragments),s.data.ids&&(g(s.data.ids),v(s.data.ids)),o(document.body).trigger("woosw_remove",[a])})),s.preventDefault()})),o(document).on("click touch",".woosw-empty",(function(s){var n,w,e=o(this);confirm(woosw_vars.empty_confirm)&&(c(),w={action:"wishlist_empty",key:n=e.closest(".woosw-popup-inner").data("key")},o.post(woosw_vars.ajax_url,w,(function(s){null!=s.content&&o("#woosw_wishlist").html(s.content).addClass("woosw-loaded"),null!=s.notice&&u(s.notice),null!=s.count&&l(s.count),t&&s.data&&sessionStorage.setItem("woosw_data_"+s.data.key,JSON.stringify(s.data)),s.data.fragments&&f(s.data.fragments),s.data.ids&&(g(s.data.ids),v(s.data.ids)),r(),o(document.body).trigger("woosw_empty",[n])}))),s.preventDefault()})),o(document).on("click touch",".woosw-popup",(function(t){var s=o(".woosw-popup-content");0==o(t.target).closest(s).length&&(i(),d())})),o(document).on("click touch",".woosw-continue",(function(t){var s=o(this).attr("data-url");i(),""!==s&&(window.location.href=s),t.preventDefault()})),o(document).on("click touch","#woosw_wishlist .woosw-popup-close",(function(o){i(),o.preventDefault()})),o(document).on("click touch","#woosw_manage .woosw-popup-close",(function(o){d(),o.preventDefault()})),o(document).on("click touch",".woosw-manage",(function(t){t.preventDefault(),c();o.post(woosw_vars.ajax_url,{action:"manage_wishlists"},(function(t){i(),o("#woosw_manage").html(t),o("#woosw_manage").addClass("woosw-show"),o(document.body).trigger("woosw_manage_show"),r()}))})),o(document).on("click touch","#woosw_add_wishlist",(function(t){var s;t.preventDefault(),c(),s={action:"add_wishlist",name:o("#woosw_wishlist_name").val()},o.post(woosw_vars.ajax_url,s,(function(t){o("#woosw_manage").html(t),o("#woosw_wishlist").removeClass("woosw-loaded"),r()}))})),o(document).on("click touch",".woosw-set-default",(function(s){var n;s.preventDefault(),c(),n={action:"set_default",key:o(this).data("key")},o.post(woosw_vars.ajax_url,n,(function(s){null!=s.count&&l(s.count),null!=s.products&&s.products.length&&s.products.forEach((o=>{b(o)})),o("#woosw_manage").html(s.content),t&&s.data&&sessionStorage.setItem("woosw_data_"+s.data.key,JSON.stringify(s.data)),s.data.fragments&&f(s.data.fragments),s.data.ids&&(g(s.data.ids),v(s.data.ids)),o("#woosw_wishlist").removeClass("woosw-loaded"),r()}))})),o(document).on("click touch",".woosw-delete-wishlist",(function(t){var s;t.preventDefault(),confirm(woosw_vars.delete_confirm)&&(c(),s={action:"delete_wishlist",key:o(this).data("key")},o.post(woosw_vars.ajax_url,s,(function(t){o("#woosw_manage").html(t),o("#woosw_wishlist").removeClass("woosw-loaded"),r()})))})),o(document).on("click touch",".woosw-view-wishlist",(function(t){var s;t.preventDefault(),c(),s={action:"view_wishlist",key:o(this).data("key")},o.post(woosw_vars.ajax_url,s,(function(t){d(),o("#woosw_wishlist").removeClass("woosw-loaded").html(t),a(),r()}))})),o(document).on("click touch",".woosw-menu-item a, .woosw-menu a",(function(t){"open_popup"===woosw_vars.menu_action&&(t.preventDefault(),o("#woosw_wishlist").hasClass("woosw-loaded")?a():w())})),o(document).on("click touch","#woosw_copy_url, #woosw_copy_btn",(function(o){o.preventDefault(),function(o){var t,s,n,w;o="string"==typeof o?document.querySelector(o):o,navigator.userAgent.match(/ipad|ipod|iphone/i)?(t=o.contentEditable,s=o.readOnly,o.contentEditable=!0,o.readOnly=!0,n=document.createRange(),n.selectNodeContents(o),w=window.getSelection(),w.removeAllRanges(),w.addRange(n),o.setSelectionRange(0,999999),o.contentEditable=t,o.readOnly=s):o.select(),document.execCommand("copy"),alert(woosw_vars.copied_text+" "+o.value)}("#woosw_copy_url")})),o(document).on("click touch",".woosw-item--note",(function(){o(this).closest(".woosw-item").find(".woosw-item--note-add").length&&(o(this).closest(".woosw-item").find(".woosw-item--note-add").show(),o(this).hide())})),o(document).on("click touch",".woosw_add_note",(function(t){var s,n;t.preventDefault(),c(),n={action:"add_note",woosw_key:(s=o(this)).closest(".woosw-popup-inner").data("key"),product_id:s.closest(".woosw-item").attr("data-id"),note:m(s.closest(".woosw-item").find('input[type="text"]').val())},o.post(woosw_vars.ajax_url,n,(function(o){s.closest(".woosw-item").find(".woosw-item--note").html(o).show(),s.closest(".woosw-item").find(".woosw-item--note-add").hide(),r()}))})),o(window).on("resize",(function(){h()}))}(jQuery);